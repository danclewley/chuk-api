
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>eocis_chuk_api documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.f2e4d321.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#welcome-to-the-eocis_chuk_api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="eocis_chuk_api documentation" class="md-header__button md-logo" aria-label="eocis_chuk_api documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eocis_chuk_api documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Welcome to the eocis_chuk_api documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="eocis_chuk_api documentation" class="md-nav__button md-logo" aria-label="eocis_chuk_api documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    eocis_chuk_api documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Welcome to the eocis_chuk_api documentation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Welcome to the eocis_chuk_api documentation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-loading-and-exporting-chuk-data" class="md-nav__link">
    <span class="md-ellipsis">
      Creating, loading and exporting CHUK data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils" class="md-nav__link">
    <span class="md-ellipsis">
      chuk_dataset_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKDataSetUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKDataSetUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon" class="md-nav__link">
    <span class="md-ellipsis">
      add_latlon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon_bnds" class="md-nav__link">
    <span class="md-ellipsis">
      add_latlon_bnds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_variable" class="md-nav__link">
    <span class="md-ellipsis">
      add_variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.check" class="md-nav__link">
    <span class="md-ellipsis">
      check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_filename" class="md-nav__link">
    <span class="md-ellipsis">
      create_filename
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_new_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      create_new_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_latlons" class="md-nav__link">
    <span class="md-ellipsis">
      get_grid_latlons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_shape" class="md-nav__link">
    <span class="md-ellipsis">
      get_grid_shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.sample" class="md-nav__link">
    <span class="md-ellipsis">
      sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save_as_geotif" class="md-nav__link">
    <span class="md-ellipsis">
      save_as_geotif
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-chuk-auxilary-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with CHUK Auxilary data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils" class="md-nav__link">
    <span class="md-ellipsis">
      chuk_auxilary_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryDataCombinedMask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryDataCombinedMask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryDataMask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryDataMask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.add_mask_value" class="md-nav__link">
    <span class="md-ellipsis">
      add_mask_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_all_mask_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_mask_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_selected_mask_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_selected_mask_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.to_array" class="md-nav__link">
    <span class="md-ellipsis">
      to_array
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils.create_mask" class="md-nav__link">
    <span class="md-ellipsis">
      create_mask
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask" class="md-nav__link">
    <span class="md-ellipsis">
      Mask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.and_mask" class="md-nav__link">
    <span class="md-ellipsis">
      and_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.count" class="md-nav__link">
    <span class="md-ellipsis">
      count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.fraction" class="md-nav__link">
    <span class="md-ellipsis">
      fraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.not_mask" class="md-nav__link">
    <span class="md-ellipsis">
      not_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.or_mask" class="md-nav__link">
    <span class="md-ellipsis">
      or_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.to_array" class="md-nav__link">
    <span class="md-ellipsis">
      to_array
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-loading-and-exporting-chuk-data" class="md-nav__link">
    <span class="md-ellipsis">
      Creating, loading and exporting CHUK data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils" class="md-nav__link">
    <span class="md-ellipsis">
      chuk_dataset_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKDataSetUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKDataSetUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon" class="md-nav__link">
    <span class="md-ellipsis">
      add_latlon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon_bnds" class="md-nav__link">
    <span class="md-ellipsis">
      add_latlon_bnds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_variable" class="md-nav__link">
    <span class="md-ellipsis">
      add_variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.check" class="md-nav__link">
    <span class="md-ellipsis">
      check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_filename" class="md-nav__link">
    <span class="md-ellipsis">
      create_filename
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_new_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      create_new_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_latlons" class="md-nav__link">
    <span class="md-ellipsis">
      get_grid_latlons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_shape" class="md-nav__link">
    <span class="md-ellipsis">
      get_grid_shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.sample" class="md-nav__link">
    <span class="md-ellipsis">
      sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save_as_geotif" class="md-nav__link">
    <span class="md-ellipsis">
      save_as_geotif
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-chuk-auxilary-data" class="md-nav__link">
    <span class="md-ellipsis">
      Working with CHUK Auxilary data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils" class="md-nav__link">
    <span class="md-ellipsis">
      chuk_auxilary_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryDataCombinedMask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryDataCombinedMask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryDataMask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryDataMask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.add_mask_value" class="md-nav__link">
    <span class="md-ellipsis">
      add_mask_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_all_mask_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_mask_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_selected_mask_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_selected_mask_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.to_array" class="md-nav__link">
    <span class="md-ellipsis">
      to_array
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils" class="md-nav__link">
    <span class="md-ellipsis">
      CHUKAuxilaryUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CHUKAuxilaryUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils.create_mask" class="md-nav__link">
    <span class="md-ellipsis">
      create_mask
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask" class="md-nav__link">
    <span class="md-ellipsis">
      Mask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.and_mask" class="md-nav__link">
    <span class="md-ellipsis">
      and_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.count" class="md-nav__link">
    <span class="md-ellipsis">
      count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.fraction" class="md-nav__link">
    <span class="md-ellipsis">
      fraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.not_mask" class="md-nav__link">
    <span class="md-ellipsis">
      not_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.or_mask" class="md-nav__link">
    <span class="md-ellipsis">
      or_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eocis_chuk_api.chuk_auxilary_utils.Mask.to_array" class="md-nav__link">
    <span class="md-ellipsis">
      to_array
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="welcome-to-the-eocis_chuk_api-documentation">Welcome to the eocis_chuk_api documentation</h1>
<h2 id="creating-loading-and-exporting-chuk-data">Creating, loading and exporting CHUK data</h2>


<div class="doc doc-object doc-module">



<a id="eocis_chuk_api.chuk_dataset_utils"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils" class="doc doc-heading">
          <code>CHUKDataSetUtils</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Provide utility functions for working with CHUK datasets, based on xarray data structures.</p>
<p>This class helps users to work with CHUK datasets, providing support for creating and converting data and metadata</p>
<p>Examples:</p>
<pre><code>&gt;&gt;&gt; import xarray as xr
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; from eocis_chuk_api import CHUKDataSetUtils
&gt;&gt;&gt; utils = CHUKDataSetUtils("EOCIS-CHUK-GRID-100M-v0.4.nc")
&gt;&gt;&gt; chuk_ds = utils.create_new_dataset(
     title="My CHUK dataset",
     institution = "EOCIS CHUK",
     version = "1.0",
     convention = "CF-1.10",
     summary = "Shows estimates of the squirrel population in each CHUK grid cell",
     license = "Creative Commons Licence by attribution (https://creativecommons.org/licenses/by/4.0/)",
     history = "Developed from the squirrel population dataset",
     comment = "This is a made up example",
     creator_url = "https:///www.example.com",
     creator_name = "Institute of Squirrel Studies",
     creator_email = "enquiries@squirrel-studies.org.uk",
     creator_processing_institution = "Institute of Squirrel Studies")
&gt;&gt;&gt; # create an array to hold the data
&gt;&gt;&gt; population_data = np.zeros(utils.get_grid_shape())
&gt;&gt;&gt; # populate the data
&gt;&gt;&gt; population_data[...] = ...
&gt;&gt;&gt; # attach the data
&gt;&gt;&gt; chuk_ds["squirrel_population"] = xr.DataArray(population_data,dims=("y","x"), attrs={
    "long_name":"estimated_squirrel_population",
    "coordinates": "lat lon",
    "grid_mapping": "crsOSGB"
})
&gt;&gt;&gt; # save the dataset
&gt;&gt;&gt; utils.save(chuk_ds, "EOCIS-CHUK-L4-SQUIRRELPOP-MERGED-20231204-v0.1.nc")
</code></pre>

            <details class="quote">
              <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CHUKDataSetUtils</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provide utility functions for working with CHUK datasets, based on xarray data structures.</span>

<span class="sd">    This class helps users to work with CHUK datasets, providing support for creating and converting data and metadata</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; import xarray as xr</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; from eocis_chuk_api import CHUKDataSetUtils</span>
<span class="sd">        &gt;&gt;&gt; utils = CHUKDataSetUtils(&quot;EOCIS-CHUK-GRID-100M-v0.4.nc&quot;)</span>
<span class="sd">        &gt;&gt;&gt; chuk_ds = utils.create_new_dataset(</span>
<span class="sd">             title=&quot;My CHUK dataset&quot;,</span>
<span class="sd">             institution = &quot;EOCIS CHUK&quot;,</span>
<span class="sd">             version = &quot;1.0&quot;,</span>
<span class="sd">             convention = &quot;CF-1.10&quot;,</span>
<span class="sd">             summary = &quot;Shows estimates of the squirrel population in each CHUK grid cell&quot;,</span>
<span class="sd">             license = &quot;Creative Commons Licence by attribution (https://creativecommons.org/licenses/by/4.0/)&quot;,</span>
<span class="sd">             history = &quot;Developed from the squirrel population dataset&quot;,</span>
<span class="sd">             comment = &quot;This is a made up example&quot;,</span>
<span class="sd">             creator_url = &quot;https:///www.example.com&quot;,</span>
<span class="sd">             creator_name = &quot;Institute of Squirrel Studies&quot;,</span>
<span class="sd">             creator_email = &quot;enquiries@squirrel-studies.org.uk&quot;,</span>
<span class="sd">             creator_processing_institution = &quot;Institute of Squirrel Studies&quot;)</span>
<span class="sd">        &gt;&gt;&gt; # create an array to hold the data</span>
<span class="sd">        &gt;&gt;&gt; population_data = np.zeros(utils.get_grid_shape())</span>
<span class="sd">        &gt;&gt;&gt; # populate the data</span>
<span class="sd">        &gt;&gt;&gt; population_data[...] = ...</span>
<span class="sd">        &gt;&gt;&gt; # attach the data</span>
<span class="sd">        &gt;&gt;&gt; chuk_ds[&quot;squirrel_population&quot;] = xr.DataArray(population_data,dims=(&quot;y&quot;,&quot;x&quot;), attrs={</span>
<span class="sd">            &quot;long_name&quot;:&quot;estimated_squirrel_population&quot;,</span>
<span class="sd">            &quot;coordinates&quot;: &quot;lat lon&quot;,</span>
<span class="sd">            &quot;grid_mapping&quot;: &quot;crsOSGB&quot;</span>
<span class="sd">        })</span>
<span class="sd">        &gt;&gt;&gt; # save the dataset</span>
<span class="sd">        &gt;&gt;&gt; utils.save(chuk_ds, &quot;EOCIS-CHUK-L4-SQUIRRELPOP-MERGED-20231204-v0.1.nc&quot;)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chuk_grid_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise an instance with the path to the CHUK grid file</span>

<span class="sd">        Args:</span>
<span class="sd">            chuk_grid_path: path to a grid file</span>

<span class="sd">        Notes:</span>
<span class="sd">            grid files can be obtained from https://gws-access.jasmin.ac.uk/public/nceo_uor/eocis-chuk/</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; from eocis_chuk_api import CHUKDataSetUtils</span>
<span class="sd">            &gt;&gt;&gt; utils = CHUKDataSetUtils(&quot;EOCIS-CHUK-GRID-100M-v0.4.nc&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">chuk_grid_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_grid_latlons</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">,</span> <span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain the chuk grid lats/lons</span>

<span class="sd">        Returns:</span>
<span class="sd">            2-tuple containing xarray.DataArray objects (lats,lons)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_grid_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain the chuk grid shape (y,x)</span>

<span class="sd">        Returns:</span>
<span class="sd">            2-tuple containing the grid (height, width)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">shape</span>

    <span class="k">def</span> <span class="nf">create_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">processing_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">product_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">product_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">datetime</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">additional_segregator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.nc&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an EOCIS standards compliant filename</span>

<span class="sd">        Args:</span>
<span class="sd">            project: the EOCIS project string (see the appropriate standards doc)</span>
<span class="sd">            processing_level: specify the processing level in (L0, L1A, L1B, L1C, L2, L2P, L3, L3U, L3C, L3S, L4, IND)</span>
<span class="sd">            product_type: standardised term to describe the main product type in te dataset, see standards doc</span>
<span class="sd">            product_string: descriptive name chosen from the team, should not contain hyphens, can contain underscores</span>
<span class="sd">            datetime: date and optionally time, format YYYY[MM[DD[HH[MM[SS]]]]]</span>
<span class="sd">            version: File version number one or more digits followed by an optional &quot;.&quot; and another one or more digits</span>
<span class="sd">            additional_segregator: an optional extra segregator, to be used if otherwise different data sets</span>
<span class="sd">                                   would generate the same filename</span>
<span class="sd">            suffix: the file suffix, including the &quot;.&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            Formatted filename</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">segregator</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">additional_segregator</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">additional_segregator</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;EOCIS-</span><span class="si">{</span><span class="n">project</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">processing_level</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">product_type</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">product_string</span><span class="si">}{</span><span class="n">segregator</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">datetime</span><span class="si">}</span><span class="s2">-fv</span><span class="si">{</span><span class="n">version</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">create_new_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">include_lon_lat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                           <span class="n">institution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS CHUK&quot;</span><span class="p">,</span>
                           <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">history</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">references</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">tracking_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">Conventions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CF-1.10&quot;</span><span class="p">,</span>
                           <span class="n">product_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">format_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">keywords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">naming_authority</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">keywords_vocabulary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">cdm_data_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">date_created</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">creator_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">creator_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">creator_email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">project</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Earth Observation Climate Information Service (EOCIS)&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lat_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;47.089&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lat_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;61.133&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lon_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;-15.374&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lon_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;4.750&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_vertical_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_vertical_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                           <span class="n">time_coverage_start</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">time_coverage_end</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">time_coverage_duration</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">time_coverage_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">standard_name_vocabulary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">license</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Creative Commons Attribution 4.0 International (CC-BY 4.0 license)&quot;</span><span class="p">,</span>
                           <span class="n">platform</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">sensor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">spatial_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100m&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lat_units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;degrees_north&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lon_units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;degrees_east&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lon_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0009&quot;</span><span class="p">,</span>
                           <span class="n">geospatial_lat_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.00086&quot;</span><span class="p">,</span>
                           <span class="n">key_variables</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">acknowledgement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Funded by UK EOCIS. Use of these data should acknowledge EOCIS&quot;</span><span class="p">,</span>
                           <span class="n">publisher_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://eocis.org&quot;</span><span class="p">,</span>
                           <span class="n">publisher_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS&quot;</span><span class="p">,</span>
                           <span class="n">publisher_email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS@reading.ac.uk&quot;</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">other_attributes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new CHUK dataset with expected global attributes.</span>

<span class="sd">        Args:</span>
<span class="sd">            include_lon_lat: True if lon and lat 2d variables should be included</span>
<span class="sd">            title: a title for the dataset</span>
<span class="sd">            institution: Succinct description of the dataset</span>
<span class="sd">            source: Comma separated list of original data sources (+DOIs if available)</span>
<span class="sd">            history: Processing history of the dataset</span>
<span class="sd">            references: References to algorithm, ATBD, technical note describing dataset</span>
<span class="sd">            tracking_id: A UUID (Universal Unique Identifier) value</span>
<span class="sd">            Conventions: The CF Version e.g. CF-1.10</span>
<span class="sd">            product_version: The product version of this data file</span>
<span class="sd">            format_version: The EOCIS data format used e.g. “EOCIS Data Standards v1.x”</span>
<span class="sd">            summary: A paragraph describing the dataset</span>
<span class="sd">            keywords: A comma separated list of key words and phrases</span>
<span class="sd">            id: see naming_authority</span>
<span class="sd">            naming_authority: The combination of the naming authority and the id should be a globally unique identifier for the dataset</span>
<span class="sd">            keywords_vocabulary: If you are following a guideline for the words/phrases in your “keywords” attribute, put the name of that guideline here</span>
<span class="sd">            cdm_data_type: The THREDDS data type appropriate for this dataset</span>
<span class="sd">            comment: Miscellaneous information about the data</span>
<span class="sd">            date_created: The date on which the data was created</span>
<span class="sd">            creator_name: The person/organisation that created the data</span>
<span class="sd">            creator_url: A URL for the person/organisation that created the data</span>
<span class="sd">            creator_email: Contact email address for the person/organisation that created the data</span>
<span class="sd">            project: The scientific project that produced the data: “Earth Observation Climate Information Service (EOCIS)”</span>
<span class="sd">            geospatial_lat_min: Decimal degrees north, range -90 to +90</span>
<span class="sd">            geospatial_lat_max: Decimal degrees north, range -90 to +90</span>
<span class="sd">            geospatial_lon_min: Decimal degrees east, range -180 to +180</span>
<span class="sd">            geospatial_lon_max: Decimal degrees east, range -180 to +180</span>
<span class="sd">            geospatial_vertical_min: Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</span>
<span class="sd">            geospatial_vertical_max: Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</span>
<span class="sd">            time_coverage_start: Format yyyymmddThhmmssZ</span>
<span class="sd">            time_coverage_end: Format yyyymmddThhmmssZ</span>
<span class="sd">            time_coverage_duration: Should be an ISO8601 duration string, for example P1D</span>
<span class="sd">            time_coverage_resolution: Should be an ISO8601 duration string. For L2 data on the original satellite sampling it is acceptable to use &#39;satellite_orbit_frequency&#39;</span>
<span class="sd">            standard_name_vocabulary: The name of the controlled vocabulary from which variable standard names are taken e.g. ‘CF Standard Name Table v82’</span>
<span class="sd">            license: Describe the restrictions to data access and distribution</span>
<span class="sd">            platform: Satellite name e.g. Sentinel-5. Separate lists by commas and use angled brackets for a platform series, e.g. ‘Envisat, NOAA-&lt;12,14,16,17,18&gt;, Metop-A’. The platform names used should follow the naming in the CCI controlled vocabulary</span>
<span class="sd">            sensor: Sensor name e.g. AATSR. Separate lists by commas.  The platform names used should follow the naming in the CCI controlled vocabulary</span>
<span class="sd">            spatial_resolution: A free-text string describing the approximate resolution of the product. For example, “1.1km at nadir”. This is intended to provide a useful indication to the user, so if more than one resolution is relevant e.g. the grid resolution and the data resolution, then both can be included.</span>
<span class="sd">            geospatial_lat_units: Geospatial latitude units used</span>
<span class="sd">            geospatial_lon_units: Geospatial longitude units used</span>
<span class="sd">            geospatial_lon_resolution: Geospatial latitude resolution used</span>
<span class="sd">            geospatial_lat_resolution: Geospatial longitude resolution used</span>
<span class="sd">            key_variables: A comma separated list of the key primary variables in the file i.e. those that have been scientifically validated.</span>
<span class="sd">            acknowledgement: Acknowledge funding sources and/or contributors</span>
<span class="sd">            other_attributes: any other attributes to include</span>

<span class="sd">        Returns:</span>
<span class="sd">            An xarray.Dataset object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;institution&quot;</span><span class="p">,</span> <span class="n">institution</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;history&quot;</span><span class="p">,</span> <span class="n">history</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;references&quot;</span><span class="p">,</span> <span class="n">references</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;tracking_id&quot;</span><span class="p">,</span> <span class="n">tracking_id</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;Conventions&quot;</span><span class="p">,</span> <span class="n">Conventions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;product_version&quot;</span><span class="p">,</span> <span class="n">product_version</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;format_version&quot;</span><span class="p">,</span> <span class="n">format_version</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span> <span class="n">summary</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;keywords&quot;</span><span class="p">,</span> <span class="n">keywords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;naming_authority&quot;</span><span class="p">,</span> <span class="n">naming_authority</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;keywords_vocabulary&quot;</span><span class="p">,</span> <span class="n">keywords_vocabulary</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;cdm_data_type&quot;</span><span class="p">,</span> <span class="n">cdm_data_type</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;date_created&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_name&quot;</span><span class="p">,</span> <span class="n">creator_name</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_url&quot;</span><span class="p">,</span> <span class="n">creator_url</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_email&quot;</span><span class="p">,</span> <span class="n">creator_email</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="n">project</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_min&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_min</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_max&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_max</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_min&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_min</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_max&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_max</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_vertical_min&quot;</span><span class="p">,</span> <span class="n">geospatial_vertical_min</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_vertical_max&quot;</span><span class="p">,</span> <span class="n">geospatial_vertical_max</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_start&quot;</span><span class="p">,</span> <span class="n">time_coverage_start</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_end&quot;</span><span class="p">,</span> <span class="n">time_coverage_end</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_duration&quot;</span><span class="p">,</span> <span class="n">time_coverage_duration</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_resolution&quot;</span><span class="p">,</span> <span class="n">time_coverage_resolution</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;standard_name_vocabulary&quot;</span><span class="p">,</span> <span class="n">standard_name_vocabulary</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;license&quot;</span><span class="p">,</span> <span class="n">license</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;platform&quot;</span><span class="p">,</span> <span class="n">platform</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;sensor&quot;</span><span class="p">,</span> <span class="n">sensor</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;spatial_resolution&quot;</span><span class="p">,</span> <span class="n">spatial_resolution</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_units&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_units</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_units&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_units</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_resolution&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_resolution</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_resolution&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_resolution</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;key_variables&quot;</span><span class="p">,</span> <span class="n">key_variables</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;acknowledgement&quot;</span><span class="p">,</span> <span class="n">acknowledgement</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_name&quot;</span><span class="p">,</span> <span class="n">publisher_name</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_url&quot;</span><span class="p">,</span> <span class="n">publisher_url</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_email&quot;</span><span class="p">,</span> <span class="n">publisher_email</span><span class="p">),</span>

        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_attributes</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
        <span class="c1"># copy the grid definition from the grid file</span>
        <span class="n">copyvars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x_bnds&quot;</span><span class="p">,</span> <span class="s2">&quot;y_bnds&quot;</span><span class="p">,</span> <span class="s2">&quot;crsOSGB&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">include_lon_lat</span><span class="p">:</span>
            <span class="n">copyvars</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">copyvar</span> <span class="ow">in</span> <span class="n">copyvars</span><span class="p">:</span>
            <span class="n">ds</span><span class="p">[</span><span class="n">copyvar</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="n">copyvar</span><span class="p">]</span>

        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:27700&quot;</span><span class="p">,</span> <span class="n">grid_mapping_name</span><span class="o">=</span><span class="s2">&quot;crsOSGB&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ds</span>

    <span class="k">def</span> <span class="nf">add_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to_dataset</span><span class="p">:</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">standard_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">long_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">other_attrs</span><span class="p">:</span><span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new variable to a dataset.  The dataset is updated in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            to_dataset: The xarray.Dataset to which the variable will be added</span>
<span class="sd">            data: a numpy array containing the data, organised by (y,x), (time,y,x) or (y,x,time)</span>
<span class="sd">            variable_name: the name of the variable to be added to the dataset</span>
<span class="sd">            standard_name: CF standard name (if appropriate)</span>
<span class="sd">            long_name:  A longer descriptive name of the variable</span>
<span class="sd">            units: units from UDUNITS</span>
<span class="sd">            other_attrs: dictionary containing other attributes to add to the new variable</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the data parameter does not match the expected shape</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expected_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_grid_shape</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">expected_shape</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Bad data shape, expecting: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expected_shape</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; was: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">expected_shape</span><span class="p">:</span>
                <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">expected_shape</span><span class="p">:</span>
                <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">)</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grid_mapping&quot;</span><span class="p">:</span> <span class="s2">&quot;crsOSGB&quot;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">standard_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;standard_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">standard_name</span>
        <span class="k">if</span> <span class="n">long_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">long_name</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>
        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_attrs</span><span class="p">)</span>

        <span class="n">to_dataset</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="n">dims</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">add_latlon</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load a CHUK dataset from file and return a dataset</span>

<span class="sd">        Args:</span>
<span class="sd">            from_path: path to a NetCDF4 file</span>
<span class="sd">            add_latlon: add lon and lat 2D arrays to the dataset</span>
<span class="sd">            add_latlon_bnds: add lon_bnds and lat_bnds 2D arrays to the dataset</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dataset containing the loaded CHUK data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">from_path</span><span class="p">,</span> <span class="n">decode_coords</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_latlon</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_latlon_bnds</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon_bnds</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ds</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">to_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">add_latlon</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">x_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">y_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
             <span class="n">time_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">custom_encodings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save a CHUK dataset to file, applying the standard chunking and compression</span>

<span class="sd">        Args:</span>
<span class="sd">            ds: an xarray dataset containing CHUK data</span>
<span class="sd">            to_path: path to a NetCDF4 file</span>
<span class="sd">            add_latlon: add lon and lat 2D arrays to the dataset</span>
<span class="sd">            add_latlon_bnds: add lon_bnds and lat_bnds 2D arrays to the dataset</span>
<span class="sd">            x_chunk_size: size of chunking in the x-dimension</span>
<span class="sd">            y_chunk_size: size of chunking in the x-dimension</span>
<span class="sd">            time_chunk_size: size of chunking in the time dimension</span>
<span class="sd">            custom_encodings: dictionary mapping from variable names to a custom encoding to use by xarray</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">encodings</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">custom_encodings</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">custom_encodings</span><span class="p">:</span>
                <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">custom_encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dims</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span>
                <span class="k">if</span> <span class="s2">&quot;x&quot;</span> <span class="ow">in</span> <span class="n">dims</span> <span class="ow">and</span> <span class="s2">&quot;y&quot;</span> <span class="ow">in</span> <span class="n">dims</span><span class="p">:</span>

                    <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;zlib&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;complevel&quot;</span><span class="p">:</span> <span class="mi">5</span>
                    <span class="p">}</span>

                    <span class="n">chunk_sizes</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dims</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                            <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_chunk_size</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
                            <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_chunk_size</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span>
                            <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time_chunk_size</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s2">&quot;chunksizes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chunk_sizes</span>

        <span class="k">if</span> <span class="n">add_latlon</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_latlon_bnds</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon_bnds</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

        <span class="c1"># ds = ds.rio.write_crs(&quot;EPSG:27700&quot;,grid_mapping_name=&quot;crsOSGB&quot;)</span>

        <span class="n">ds</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">to_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encodings</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">([(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)],</span> <span class="p">[(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check a dataset against CHUK format, returning details of any problems found</span>

<span class="sd">        Args:</span>
<span class="sd">            ds: the xarray.Dataset to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            2-tuple (warnings, errors) containing lists of (code,detail) tuples</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># perform metadata checks</span>
        <span class="n">warnings</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">CHUKMetadata</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

        <span class="c1"># check the dimensions are correct, compared to the grid</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]:</span>
            <span class="n">actual_shape</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
            <span class="n">expected_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">if</span> <span class="n">actual_shape</span> <span class="o">!=</span> <span class="n">expected_shape</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;bad_shape&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">actual_shape</span><span class="p">,</span> <span class="n">expected_shape</span><span class="p">)))</span>

        <span class="k">return</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">errors</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">to_resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a lower resolution sample of a CHUK dataset</span>

<span class="sd">        Args:</span>
<span class="sd">            ds: the xarray.Dataset containing CHUK data to sample</span>
<span class="sd">            to_resolution: the resolution for the sampled output, must be a multiple of 100</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dataset containing the sampled data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">to_resolution</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error - resolution requested (</span><span class="si">{</span><span class="n">to_resolution</span><span class="si">}</span><span class="s2">) is not a multiple of 100&quot;</span><span class="p">)</span>
        <span class="n">sample_step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">to_resolution</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_step</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_step</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">add_latlon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add lat and lon 2D arrays from the reference grid</span>

<span class="sd">        Args:</span>
<span class="sd">            ds: the dataset to mondify in-place</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_latlon_bnds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add lat and lon 2D bounds from the reference grid</span>

<span class="sd">        Args:</span>
<span class="sd">           ds: the dataset to mondify in-place</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lon_bnds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lon_bnds&quot;</span><span class="p">]</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lat_bnds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lat_bnds&quot;</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">save_as_geotif</span><span class="p">(</span><span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">to_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save a CHUK dataset to a geotiff</span>

<span class="sd">        Args:</span>
<span class="sd">            ds: the CHUK dataset</span>
<span class="sd">            variable_name: the name of the variable to save from the dataset</span>
<span class="sd">            to_path: the path to save the geotiff file to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds_crs</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:27700&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;grid_mapping&quot;</span> <span class="ow">in</span> <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="c1"># this seems to cause a problem, why?</span>
            <span class="k">del</span> <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;grid_mapping&quot;</span><span class="p">]</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">CHUKMetadata</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">ds_crs</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">)</span>
        <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="n">to_path</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__extend_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">required</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> is required&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">chuk_grid_path</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initialise an instance with the path to the CHUK grid file</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>chuk_grid_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>path to a grid file</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="notes" open>
  <summary>Notes</summary>
  <p>grid files can be obtained from https://gws-access.jasmin.ac.uk/public/nceo_uor/eocis-chuk/</p>
</details>


<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eocis_chuk_api</span> <span class="kn">import</span> <span class="n">CHUKDataSetUtils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span> <span class="o">=</span> <span class="n">CHUKDataSetUtils</span><span class="p">(</span><span class="s2">&quot;EOCIS-CHUK-GRID-100M-v0.4.nc&quot;</span><span class="p">)</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chuk_grid_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialise an instance with the path to the CHUK grid file</span>

<span class="sd">    Args:</span>
<span class="sd">        chuk_grid_path: path to a grid file</span>

<span class="sd">    Notes:</span>
<span class="sd">        grid files can be obtained from https://gws-access.jasmin.ac.uk/public/nceo_uor/eocis-chuk/</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; from eocis_chuk_api import CHUKDataSetUtils</span>
<span class="sd">        &gt;&gt;&gt; utils = CHUKDataSetUtils(&quot;EOCIS-CHUK-GRID-100M-v0.4.nc&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">chuk_grid_path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid_resolution</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_latlon</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add lat and lon 2D arrays from the reference grid</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dataset to mondify in-place</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_latlon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add lat and lon 2D arrays from the reference grid</span>

<span class="sd">    Args:</span>
<span class="sd">        ds: the dataset to mondify in-place</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span>
    <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_latlon_bnds" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_latlon_bnds</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add lat and lon 2D bounds from the reference grid</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dataset to mondify in-place</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_latlon_bnds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add lat and lon 2D bounds from the reference grid</span>

<span class="sd">    Args:</span>
<span class="sd">       ds: the dataset to mondify in-place</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lon_bnds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lon_bnds&quot;</span><span class="p">]</span>
    <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;lat_bnds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="s2">&quot;lat_bnds&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.add_variable" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_variable</span><span class="p">(</span><span class="n">to_dataset</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="n">standard_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">long_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">other_attrs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add a new variable to a dataset.  The dataset is updated in-place.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>to_dataset</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The xarray.Dataset to which the variable will be added</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="numpy.array">array</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a numpy array containing the data, organised by (y,x), (time,y,x) or (y,x,time)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variable_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the variable to be added to the dataset</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>standard_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>CF standard name (if appropriate)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>long_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A longer descriptive name of the variable</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>units</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>units from UDUNITS</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>other_attrs</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dictionary containing other attributes to add to the new variable</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the data parameter does not match the expected shape</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to_dataset</span><span class="p">:</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">standard_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">long_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">other_attrs</span><span class="p">:</span><span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new variable to a dataset.  The dataset is updated in-place.</span>

<span class="sd">    Args:</span>
<span class="sd">        to_dataset: The xarray.Dataset to which the variable will be added</span>
<span class="sd">        data: a numpy array containing the data, organised by (y,x), (time,y,x) or (y,x,time)</span>
<span class="sd">        variable_name: the name of the variable to be added to the dataset</span>
<span class="sd">        standard_name: CF standard name (if appropriate)</span>
<span class="sd">        long_name:  A longer descriptive name of the variable</span>
<span class="sd">        units: units from UDUNITS</span>
<span class="sd">        other_attrs: dictionary containing other attributes to add to the new variable</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if the data parameter does not match the expected shape</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">expected_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_grid_shape</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">expected_shape</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Bad data shape, expecting: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expected_shape</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; was: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">expected_shape</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">expected_shape</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">)</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;grid_mapping&quot;</span><span class="p">:</span> <span class="s2">&quot;crsOSGB&quot;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">standard_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;standard_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">standard_name</span>
    <span class="k">if</span> <span class="n">long_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">long_name</span>
    <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
    <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>
    <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_attrs</span><span class="p">)</span>

    <span class="n">to_dataset</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="n">dims</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.check" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">check</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check a dataset against CHUK format, returning details of any problems found</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the xarray.Dataset to check</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>([(str, str)], [(str, str)])</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>2-tuple (warnings, errors) containing lists of (code,detail) tuples</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">([(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)],</span> <span class="p">[(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check a dataset against CHUK format, returning details of any problems found</span>

<span class="sd">    Args:</span>
<span class="sd">        ds: the xarray.Dataset to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        2-tuple (warnings, errors) containing lists of (code,detail) tuples</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># perform metadata checks</span>
    <span class="n">warnings</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">CHUKMetadata</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

    <span class="c1"># check the dimensions are correct, compared to the grid</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]:</span>
        <span class="n">actual_shape</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">expected_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">if</span> <span class="n">actual_shape</span> <span class="o">!=</span> <span class="n">expected_shape</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;bad_shape&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">actual_shape</span><span class="p">,</span> <span class="n">expected_shape</span><span class="p">)))</span>

    <span class="k">return</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_filename" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">create_filename</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">processing_level</span><span class="p">,</span> <span class="n">product_type</span><span class="p">,</span> <span class="n">product_string</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">additional_segregator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.nc&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create an EOCIS standards compliant filename</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>project</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the EOCIS project string (see the appropriate standards doc)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>processing_level</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>specify the processing level in (L0, L1A, L1B, L1C, L2, L2P, L3, L3U, L3C, L3S, L4, IND)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>product_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>standardised term to describe the main product type in te dataset, see standards doc</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>product_string</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>descriptive name chosen from the team, should not contain hyphens, can contain underscores</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>datetime</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>date and optionally time, format YYYY[MM[DD[HH[MM[SS]]]]]</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>File version number one or more digits followed by an optional "." and another one or more digits</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>additional_segregator</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an optional extra segregator, to be used if otherwise different data sets
                   would generate the same filename</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>suffix</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the file suffix, including the "."</p>
            </div>
          </td>
          <td>
                <code>&#39;.nc&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Formatted filename</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">processing_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">product_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">product_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                    <span class="n">datetime</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">additional_segregator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.nc&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an EOCIS standards compliant filename</span>

<span class="sd">    Args:</span>
<span class="sd">        project: the EOCIS project string (see the appropriate standards doc)</span>
<span class="sd">        processing_level: specify the processing level in (L0, L1A, L1B, L1C, L2, L2P, L3, L3U, L3C, L3S, L4, IND)</span>
<span class="sd">        product_type: standardised term to describe the main product type in te dataset, see standards doc</span>
<span class="sd">        product_string: descriptive name chosen from the team, should not contain hyphens, can contain underscores</span>
<span class="sd">        datetime: date and optionally time, format YYYY[MM[DD[HH[MM[SS]]]]]</span>
<span class="sd">        version: File version number one or more digits followed by an optional &quot;.&quot; and another one or more digits</span>
<span class="sd">        additional_segregator: an optional extra segregator, to be used if otherwise different data sets</span>
<span class="sd">                               would generate the same filename</span>
<span class="sd">        suffix: the file suffix, including the &quot;.&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        Formatted filename</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">segregator</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">additional_segregator</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">additional_segregator</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;EOCIS-</span><span class="si">{</span><span class="n">project</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">processing_level</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">product_type</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">product_string</span><span class="si">}{</span><span class="n">segregator</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">datetime</span><span class="si">}</span><span class="s2">-fv</span><span class="si">{</span><span class="n">version</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.create_new_dataset" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">create_new_dataset</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include_lon_lat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">institution</span><span class="o">=</span><span class="s1">&#39;EOCIS CHUK&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">history</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">tracking_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">Conventions</span><span class="o">=</span><span class="s1">&#39;CF-1.10&#39;</span><span class="p">,</span> <span class="n">product_version</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">format_version</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">naming_authority</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">keywords_vocabulary</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">cdm_data_type</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">date_created</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">creator_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">creator_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">creator_email</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;Earth Observation Climate Information Service (EOCIS)&#39;</span><span class="p">,</span> <span class="n">geospatial_lat_min</span><span class="o">=</span><span class="s1">&#39;47.089&#39;</span><span class="p">,</span> <span class="n">geospatial_lat_max</span><span class="o">=</span><span class="s1">&#39;61.133&#39;</span><span class="p">,</span> <span class="n">geospatial_lon_min</span><span class="o">=</span><span class="s1">&#39;-15.374&#39;</span><span class="p">,</span> <span class="n">geospatial_lon_max</span><span class="o">=</span><span class="s1">&#39;4.750&#39;</span><span class="p">,</span> <span class="n">geospatial_vertical_min</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">geospatial_vertical_max</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">time_coverage_start</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">time_coverage_end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">time_coverage_duration</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">time_coverage_resolution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">standard_name_vocabulary</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">license</span><span class="o">=</span><span class="s1">&#39;Creative Commons Attribution 4.0 International (CC-BY 4.0 license)&#39;</span><span class="p">,</span> <span class="n">platform</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sensor</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">spatial_resolution</span><span class="o">=</span><span class="s1">&#39;100m&#39;</span><span class="p">,</span> <span class="n">geospatial_lat_units</span><span class="o">=</span><span class="s1">&#39;degrees_north&#39;</span><span class="p">,</span> <span class="n">geospatial_lon_units</span><span class="o">=</span><span class="s1">&#39;degrees_east&#39;</span><span class="p">,</span> <span class="n">geospatial_lon_resolution</span><span class="o">=</span><span class="s1">&#39;0.0009&#39;</span><span class="p">,</span> <span class="n">geospatial_lat_resolution</span><span class="o">=</span><span class="s1">&#39;0.00086&#39;</span><span class="p">,</span> <span class="n">key_variables</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">acknowledgement</span><span class="o">=</span><span class="s1">&#39;Funded by UK EOCIS. Use of these data should acknowledge EOCIS&#39;</span><span class="p">,</span> <span class="n">publisher_url</span><span class="o">=</span><span class="s1">&#39;https://eocis.org&#39;</span><span class="p">,</span> <span class="n">publisher_name</span><span class="o">=</span><span class="s1">&#39;EOCIS&#39;</span><span class="p">,</span> <span class="n">publisher_email</span><span class="o">=</span><span class="s1">&#39;EOCIS@reading.ac.uk&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">other_attributes</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new CHUK dataset with expected global attributes.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>include_lon_lat</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if lon and lat 2d variables should be included</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>title</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a title for the dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>institution</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Succinct description of the dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;EOCIS CHUK&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>source</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Comma separated list of original data sources (+DOIs if available)</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>history</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Processing history of the dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>references</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>References to algorithm, ATBD, technical note describing dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>tracking_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A UUID (Universal Unique Identifier) value</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>Conventions</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The CF Version e.g. CF-1.10</p>
            </div>
          </td>
          <td>
                <code>&#39;CF-1.10&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>product_version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The product version of this data file</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>format_version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The EOCIS data format used e.g. “EOCIS Data Standards v1.x”</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>summary</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A paragraph describing the dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>keywords</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A comma separated list of key words and phrases</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>see naming_authority</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>naming_authority</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The combination of the naming authority and the id should be a globally unique identifier for the dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>keywords_vocabulary</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If you are following a guideline for the words/phrases in your “keywords” attribute, put the name of that guideline here</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>cdm_data_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The THREDDS data type appropriate for this dataset</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>comment</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Miscellaneous information about the data</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>date_created</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The date on which the data was created</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>creator_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The person/organisation that created the data</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>creator_url</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A URL for the person/organisation that created the data</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>creator_email</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Contact email address for the person/organisation that created the data</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>project</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The scientific project that produced the data: “Earth Observation Climate Information Service (EOCIS)”</p>
            </div>
          </td>
          <td>
                <code>&#39;Earth Observation Climate Information Service (EOCIS)&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lat_min</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decimal degrees north, range -90 to +90</p>
            </div>
          </td>
          <td>
                <code>&#39;47.089&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lat_max</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decimal degrees north, range -90 to +90</p>
            </div>
          </td>
          <td>
                <code>&#39;61.133&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lon_min</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decimal degrees east, range -180 to +180</p>
            </div>
          </td>
          <td>
                <code>&#39;-15.374&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lon_max</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Decimal degrees east, range -180 to +180</p>
            </div>
          </td>
          <td>
                <code>&#39;4.750&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_vertical_min</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</p>
            </div>
          </td>
          <td>
                <code>&#39;0&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_vertical_max</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</p>
            </div>
          </td>
          <td>
                <code>&#39;0&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>time_coverage_start</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Format yyyymmddThhmmssZ</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>time_coverage_end</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Format yyyymmddThhmmssZ</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>time_coverage_duration</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Should be an ISO8601 duration string, for example P1D</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>time_coverage_resolution</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Should be an ISO8601 duration string. For L2 data on the original satellite sampling it is acceptable to use 'satellite_orbit_frequency'</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>standard_name_vocabulary</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the controlled vocabulary from which variable standard names are taken e.g. ‘CF Standard Name Table v82’</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>license</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Describe the restrictions to data access and distribution</p>
            </div>
          </td>
          <td>
                <code>&#39;Creative Commons Attribution 4.0 International (CC-BY 4.0 license)&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>platform</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Satellite name e.g. Sentinel-5. Separate lists by commas and use angled brackets for a platform series, e.g. ‘Envisat, NOAA-&lt;12,14,16,17,18&gt;, Metop-A’. The platform names used should follow the naming in the CCI controlled vocabulary</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>sensor</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Sensor name e.g. AATSR. Separate lists by commas.  The platform names used should follow the naming in the CCI controlled vocabulary</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>spatial_resolution</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A free-text string describing the approximate resolution of the product. For example, “1.1km at nadir”. This is intended to provide a useful indication to the user, so if more than one resolution is relevant e.g. the grid resolution and the data resolution, then both can be included.</p>
            </div>
          </td>
          <td>
                <code>&#39;100m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lat_units</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Geospatial latitude units used</p>
            </div>
          </td>
          <td>
                <code>&#39;degrees_north&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lon_units</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Geospatial longitude units used</p>
            </div>
          </td>
          <td>
                <code>&#39;degrees_east&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lon_resolution</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Geospatial latitude resolution used</p>
            </div>
          </td>
          <td>
                <code>&#39;0.0009&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>geospatial_lat_resolution</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Geospatial longitude resolution used</p>
            </div>
          </td>
          <td>
                <code>&#39;0.00086&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>key_variables</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A comma separated list of the key primary variables in the file i.e. those that have been scientifically validated.</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>acknowledgement</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Acknowledge funding sources and/or contributors</p>
            </div>
          </td>
          <td>
                <code>&#39;Funded by UK EOCIS. Use of these data should acknowledge EOCIS&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>other_attributes</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>any other attributes to include</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An xarray.Dataset object</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_new_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">include_lon_lat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                       <span class="n">institution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS CHUK&quot;</span><span class="p">,</span>
                       <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">history</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">references</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">tracking_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">Conventions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CF-1.10&quot;</span><span class="p">,</span>
                       <span class="n">product_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">format_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">keywords</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">naming_authority</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">keywords_vocabulary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">cdm_data_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">date_created</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">creator_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">creator_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">creator_email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">project</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Earth Observation Climate Information Service (EOCIS)&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lat_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;47.089&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lat_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;61.133&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lon_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;-15.374&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lon_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;4.750&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_vertical_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_vertical_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                       <span class="n">time_coverage_start</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">time_coverage_end</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">time_coverage_duration</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">time_coverage_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">standard_name_vocabulary</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">license</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Creative Commons Attribution 4.0 International (CC-BY 4.0 license)&quot;</span><span class="p">,</span>
                       <span class="n">platform</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">sensor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">spatial_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100m&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lat_units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;degrees_north&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lon_units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;degrees_east&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lon_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0009&quot;</span><span class="p">,</span>
                       <span class="n">geospatial_lat_resolution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.00086&quot;</span><span class="p">,</span>
                       <span class="n">key_variables</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">acknowledgement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Funded by UK EOCIS. Use of these data should acknowledge EOCIS&quot;</span><span class="p">,</span>
                       <span class="n">publisher_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://eocis.org&quot;</span><span class="p">,</span>
                       <span class="n">publisher_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS&quot;</span><span class="p">,</span>
                       <span class="n">publisher_email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EOCIS@reading.ac.uk&quot;</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">other_attributes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new CHUK dataset with expected global attributes.</span>

<span class="sd">    Args:</span>
<span class="sd">        include_lon_lat: True if lon and lat 2d variables should be included</span>
<span class="sd">        title: a title for the dataset</span>
<span class="sd">        institution: Succinct description of the dataset</span>
<span class="sd">        source: Comma separated list of original data sources (+DOIs if available)</span>
<span class="sd">        history: Processing history of the dataset</span>
<span class="sd">        references: References to algorithm, ATBD, technical note describing dataset</span>
<span class="sd">        tracking_id: A UUID (Universal Unique Identifier) value</span>
<span class="sd">        Conventions: The CF Version e.g. CF-1.10</span>
<span class="sd">        product_version: The product version of this data file</span>
<span class="sd">        format_version: The EOCIS data format used e.g. “EOCIS Data Standards v1.x”</span>
<span class="sd">        summary: A paragraph describing the dataset</span>
<span class="sd">        keywords: A comma separated list of key words and phrases</span>
<span class="sd">        id: see naming_authority</span>
<span class="sd">        naming_authority: The combination of the naming authority and the id should be a globally unique identifier for the dataset</span>
<span class="sd">        keywords_vocabulary: If you are following a guideline for the words/phrases in your “keywords” attribute, put the name of that guideline here</span>
<span class="sd">        cdm_data_type: The THREDDS data type appropriate for this dataset</span>
<span class="sd">        comment: Miscellaneous information about the data</span>
<span class="sd">        date_created: The date on which the data was created</span>
<span class="sd">        creator_name: The person/organisation that created the data</span>
<span class="sd">        creator_url: A URL for the person/organisation that created the data</span>
<span class="sd">        creator_email: Contact email address for the person/organisation that created the data</span>
<span class="sd">        project: The scientific project that produced the data: “Earth Observation Climate Information Service (EOCIS)”</span>
<span class="sd">        geospatial_lat_min: Decimal degrees north, range -90 to +90</span>
<span class="sd">        geospatial_lat_max: Decimal degrees north, range -90 to +90</span>
<span class="sd">        geospatial_lon_min: Decimal degrees east, range -180 to +180</span>
<span class="sd">        geospatial_lon_max: Decimal degrees east, range -180 to +180</span>
<span class="sd">        geospatial_vertical_min: Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</span>
<span class="sd">        geospatial_vertical_max: Assumed to be in metres above ground unless geospatial_vertical_units attribute defined otherwise</span>
<span class="sd">        time_coverage_start: Format yyyymmddThhmmssZ</span>
<span class="sd">        time_coverage_end: Format yyyymmddThhmmssZ</span>
<span class="sd">        time_coverage_duration: Should be an ISO8601 duration string, for example P1D</span>
<span class="sd">        time_coverage_resolution: Should be an ISO8601 duration string. For L2 data on the original satellite sampling it is acceptable to use &#39;satellite_orbit_frequency&#39;</span>
<span class="sd">        standard_name_vocabulary: The name of the controlled vocabulary from which variable standard names are taken e.g. ‘CF Standard Name Table v82’</span>
<span class="sd">        license: Describe the restrictions to data access and distribution</span>
<span class="sd">        platform: Satellite name e.g. Sentinel-5. Separate lists by commas and use angled brackets for a platform series, e.g. ‘Envisat, NOAA-&lt;12,14,16,17,18&gt;, Metop-A’. The platform names used should follow the naming in the CCI controlled vocabulary</span>
<span class="sd">        sensor: Sensor name e.g. AATSR. Separate lists by commas.  The platform names used should follow the naming in the CCI controlled vocabulary</span>
<span class="sd">        spatial_resolution: A free-text string describing the approximate resolution of the product. For example, “1.1km at nadir”. This is intended to provide a useful indication to the user, so if more than one resolution is relevant e.g. the grid resolution and the data resolution, then both can be included.</span>
<span class="sd">        geospatial_lat_units: Geospatial latitude units used</span>
<span class="sd">        geospatial_lon_units: Geospatial longitude units used</span>
<span class="sd">        geospatial_lon_resolution: Geospatial latitude resolution used</span>
<span class="sd">        geospatial_lat_resolution: Geospatial longitude resolution used</span>
<span class="sd">        key_variables: A comma separated list of the key primary variables in the file i.e. those that have been scientifically validated.</span>
<span class="sd">        acknowledgement: Acknowledge funding sources and/or contributors</span>
<span class="sd">        other_attributes: any other attributes to include</span>

<span class="sd">    Returns:</span>
<span class="sd">        An xarray.Dataset object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;institution&quot;</span><span class="p">,</span> <span class="n">institution</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;history&quot;</span><span class="p">,</span> <span class="n">history</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;references&quot;</span><span class="p">,</span> <span class="n">references</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;tracking_id&quot;</span><span class="p">,</span> <span class="n">tracking_id</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;Conventions&quot;</span><span class="p">,</span> <span class="n">Conventions</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;product_version&quot;</span><span class="p">,</span> <span class="n">product_version</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;format_version&quot;</span><span class="p">,</span> <span class="n">format_version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span> <span class="n">summary</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;keywords&quot;</span><span class="p">,</span> <span class="n">keywords</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;naming_authority&quot;</span><span class="p">,</span> <span class="n">naming_authority</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;keywords_vocabulary&quot;</span><span class="p">,</span> <span class="n">keywords_vocabulary</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;cdm_data_type&quot;</span><span class="p">,</span> <span class="n">cdm_data_type</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;date_created&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_name&quot;</span><span class="p">,</span> <span class="n">creator_name</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_url&quot;</span><span class="p">,</span> <span class="n">creator_url</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;creator_email&quot;</span><span class="p">,</span> <span class="n">creator_email</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="n">project</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_min&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_min</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_max&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_max</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_min&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_min</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_max&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_max</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_vertical_min&quot;</span><span class="p">,</span> <span class="n">geospatial_vertical_min</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_vertical_max&quot;</span><span class="p">,</span> <span class="n">geospatial_vertical_max</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_start&quot;</span><span class="p">,</span> <span class="n">time_coverage_start</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_end&quot;</span><span class="p">,</span> <span class="n">time_coverage_end</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_duration&quot;</span><span class="p">,</span> <span class="n">time_coverage_duration</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;time_coverage_resolution&quot;</span><span class="p">,</span> <span class="n">time_coverage_resolution</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;standard_name_vocabulary&quot;</span><span class="p">,</span> <span class="n">standard_name_vocabulary</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;license&quot;</span><span class="p">,</span> <span class="n">license</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;platform&quot;</span><span class="p">,</span> <span class="n">platform</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;sensor&quot;</span><span class="p">,</span> <span class="n">sensor</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;spatial_resolution&quot;</span><span class="p">,</span> <span class="n">spatial_resolution</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_units&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_units</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_units&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_units</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lon_resolution&quot;</span><span class="p">,</span> <span class="n">geospatial_lon_resolution</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;geospatial_lat_resolution&quot;</span><span class="p">,</span> <span class="n">geospatial_lat_resolution</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;key_variables&quot;</span><span class="p">,</span> <span class="n">key_variables</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;acknowledgement&quot;</span><span class="p">,</span> <span class="n">acknowledgement</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_name&quot;</span><span class="p">,</span> <span class="n">publisher_name</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_url&quot;</span><span class="p">,</span> <span class="n">publisher_url</span><span class="p">),</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__extend_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">&quot;publisher_email&quot;</span><span class="p">,</span> <span class="n">publisher_email</span><span class="p">),</span>

    <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_attributes</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
    <span class="c1"># copy the grid definition from the grid file</span>
    <span class="n">copyvars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;x_bnds&quot;</span><span class="p">,</span> <span class="s2">&quot;y_bnds&quot;</span><span class="p">,</span> <span class="s2">&quot;crsOSGB&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">include_lon_lat</span><span class="p">:</span>
        <span class="n">copyvars</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">copyvar</span> <span class="ow">in</span> <span class="n">copyvars</span><span class="p">:</span>
        <span class="n">ds</span><span class="p">[</span><span class="n">copyvar</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="p">[</span><span class="n">copyvar</span><span class="p">]</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:27700&quot;</span><span class="p">,</span> <span class="n">grid_mapping_name</span><span class="o">=</span><span class="s2">&quot;crsOSGB&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ds</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_latlons" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_grid_latlons</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Obtain the chuk grid lats/lons</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>(<span title="xarray.DataArray">DataArray</span>, <span title="xarray.DataArray">DataArray</span>)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>2-tuple containing xarray.DataArray objects (lats,lons)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_grid_latlons</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">,</span> <span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obtain the chuk grid lats/lons</span>

<span class="sd">    Returns:</span>
<span class="sd">        2-tuple containing xarray.DataArray objects (lats,lons)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.get_grid_shape" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_grid_shape</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Obtain the chuk grid shape (y,x)</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>(int, int)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>2-tuple containing the grid (height, width)</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_grid_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obtain the chuk grid shape (y,x)</span>

<span class="sd">    Returns:</span>
<span class="sd">        2-tuple containing the grid (height, width)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">chuk_grid_ds</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.load" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">from_path</span><span class="p">,</span> <span class="n">add_latlon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load a CHUK dataset from file and return a dataset</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>from_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>path to a NetCDF4 file</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>add_latlon</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>add lon and lat 2D arrays to the dataset</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>add_latlon_bnds</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>add lon_bnds and lat_bnds 2D arrays to the dataset</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataset containing the loaded CHUK data</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">add_latlon</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a CHUK dataset from file and return a dataset</span>

<span class="sd">    Args:</span>
<span class="sd">        from_path: path to a NetCDF4 file</span>
<span class="sd">        add_latlon: add lon and lat 2D arrays to the dataset</span>
<span class="sd">        add_latlon_bnds: add lon_bnds and lat_bnds 2D arrays to the dataset</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dataset containing the loaded CHUK data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">from_path</span><span class="p">,</span> <span class="n">decode_coords</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_latlon</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_latlon_bnds</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon_bnds</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ds</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.sample" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">to_resolution</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a lower resolution sample of a CHUK dataset</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the xarray.Dataset containing CHUK data to sample</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_resolution</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the resolution for the sampled output, must be a multiple of 100</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dataset containing the sampled data</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">to_resolution</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a lower resolution sample of a CHUK dataset</span>

<span class="sd">    Args:</span>
<span class="sd">        ds: the xarray.Dataset containing CHUK data to sample</span>
<span class="sd">        to_resolution: the resolution for the sampled output, must be a multiple of 100</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dataset containing the sampled data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">to_resolution</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error - resolution requested (</span><span class="si">{</span><span class="n">to_resolution</span><span class="si">}</span><span class="s2">) is not a multiple of 100&quot;</span><span class="p">)</span>
    <span class="n">sample_step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">to_resolution</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_step</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_step</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">to_path</span><span class="p">,</span> <span class="n">add_latlon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">x_chunk_size</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">y_chunk_size</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">time_chunk_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">custom_encodings</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Save a CHUK dataset to file, applying the standard chunking and compression</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an xarray dataset containing CHUK data</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>path to a NetCDF4 file</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>add_latlon</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>add lon and lat 2D arrays to the dataset</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>add_latlon_bnds</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>add lon_bnds and lat_bnds 2D arrays to the dataset</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>x_chunk_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>size of chunking in the x-dimension</p>
            </div>
          </td>
          <td>
                <code>200</code>
          </td>
        </tr>
        <tr>
          <td><code>y_chunk_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>size of chunking in the x-dimension</p>
            </div>
          </td>
          <td>
                <code>200</code>
          </td>
        </tr>
        <tr>
          <td><code>time_chunk_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>size of chunking in the time dimension</p>
            </div>
          </td>
          <td>
                <code>1</code>
          </td>
        </tr>
        <tr>
          <td><code>custom_encodings</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dictionary mapping from variable names to a custom encoding to use by xarray</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">to_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">add_latlon</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">add_latlon_bnds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
         <span class="n">x_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">y_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
         <span class="n">time_chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">custom_encodings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a CHUK dataset to file, applying the standard chunking and compression</span>

<span class="sd">    Args:</span>
<span class="sd">        ds: an xarray dataset containing CHUK data</span>
<span class="sd">        to_path: path to a NetCDF4 file</span>
<span class="sd">        add_latlon: add lon and lat 2D arrays to the dataset</span>
<span class="sd">        add_latlon_bnds: add lon_bnds and lat_bnds 2D arrays to the dataset</span>
<span class="sd">        x_chunk_size: size of chunking in the x-dimension</span>
<span class="sd">        y_chunk_size: size of chunking in the x-dimension</span>
<span class="sd">        time_chunk_size: size of chunking in the time dimension</span>
<span class="sd">        custom_encodings: dictionary mapping from variable names to a custom encoding to use by xarray</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">encodings</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">custom_encodings</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">custom_encodings</span><span class="p">:</span>
            <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">custom_encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span>
            <span class="k">if</span> <span class="s2">&quot;x&quot;</span> <span class="ow">in</span> <span class="n">dims</span> <span class="ow">and</span> <span class="s2">&quot;y&quot;</span> <span class="ow">in</span> <span class="n">dims</span><span class="p">:</span>

                <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;zlib&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;complevel&quot;</span><span class="p">:</span> <span class="mi">5</span>
                <span class="p">}</span>

                <span class="n">chunk_sizes</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dims</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                        <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_chunk_size</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
                        <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_chunk_size</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">d</span> <span class="o">==</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span>
                        <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time_chunk_size</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">chunk_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">encodings</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s2">&quot;chunksizes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chunk_sizes</span>

    <span class="k">if</span> <span class="n">add_latlon</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_latlon_bnds</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_latlon_bnds</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

    <span class="c1"># ds = ds.rio.write_crs(&quot;EPSG:27700&quot;,grid_mapping_name=&quot;crsOSGB&quot;)</span>

    <span class="n">ds</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">to_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encodings</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_dataset_utils.CHUKDataSetUtils.save_as_geotif" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save_as_geotif</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="n">to_path</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Save a CHUK dataset to a geotiff</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ds</code></td>
          <td>
                <code><span title="xarray.Dataset">Dataset</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the CHUK dataset</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variable_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the variable to save from the dataset</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the path to save the geotiff file to</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_dataset_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">save_as_geotif</span><span class="p">(</span><span class="n">ds</span><span class="p">:</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">to_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a CHUK dataset to a geotiff</span>

<span class="sd">    Args:</span>
<span class="sd">        ds: the CHUK dataset</span>
<span class="sd">        variable_name: the name of the variable to save from the dataset</span>
<span class="sd">        to_path: the path to save the geotiff file to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ds_crs</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:27700&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;grid_mapping&quot;</span> <span class="ow">in</span> <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
        <span class="c1"># this seems to cause a problem, why?</span>
        <span class="k">del</span> <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;grid_mapping&quot;</span><span class="p">]</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">CHUKMetadata</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">ds_crs</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">)</span>
    <span class="n">ds_crs</span><span class="p">[</span><span class="n">variable_name</span><span class="p">]</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="n">to_path</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>




  </div>

  </div>

</div><h2 id="working-with-chuk-auxilary-data">Working with CHUK Auxilary data</h2>


<div class="doc doc-object doc-module">



<a id="eocis_chuk_api.chuk_auxilary_utils"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask" class="doc doc-heading">
          <code>CHUKAuxilaryDataCombinedMask</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a></code></p>


            <details class="quote">
              <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="n">Mask</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">masks</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Mask</span><span class="p">],</span> <span class="n">operator</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a mask derived from one or more other masks</span>

<span class="sd">        Args:</span>
<span class="sd">            masks: a list of one or more masks to be combined</span>
<span class="sd">            operator: the operator to use, should be &quot;not&quot;, &quot;or&quot; or &quot;and&quot;</span>

<span class="sd">        Throws:</span>
<span class="sd">            ValueError for example if the list of masks is empty or operator is not one of &quot;not&quot;,&quot;and&quot;,&quot;or&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">masks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;masks must be a non-empty list&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">operator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="s2">&quot;or&quot;</span><span class="p">,</span><span class="s2">&quot;not&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;operator must be one of &quot;and&quot;, &quot;or&quot; or &quot;not&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">masks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;only one mask can be supplied for the not operator&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_masks</span> <span class="o">=</span> <span class="n">masks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">operator</span>

    <span class="k">def</span> <span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_masks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">stacked</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_masks</span><span class="p">],</span> <span class="s2">&quot;layer&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;or&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stacked</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;layer&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stacked</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;layer&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataCombinedMask.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">masks</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s1">&#39;or&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a mask derived from one or more other masks</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>masks</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of one or more masks to be combined</p>
            </div>
          </td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>operator</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the operator to use, should be "not", "or" or "and"</p>
            </div>
          </td>
          <td>
                <code>&#39;or&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

<details class="throws" open>
  <summary>Throws</summary>
  <p>ValueError for example if the list of masks is empty or operator is not one of "not","and","or"</p>
</details>
          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">masks</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Mask</span><span class="p">],</span> <span class="n">operator</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a mask derived from one or more other masks</span>

<span class="sd">    Args:</span>
<span class="sd">        masks: a list of one or more masks to be combined</span>
<span class="sd">        operator: the operator to use, should be &quot;not&quot;, &quot;or&quot; or &quot;and&quot;</span>

<span class="sd">    Throws:</span>
<span class="sd">        ValueError for example if the list of masks is empty or operator is not one of &quot;not&quot;,&quot;and&quot;,&quot;or&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">masks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;masks must be a non-empty list&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="s2">&quot;or&quot;</span><span class="p">,</span><span class="s2">&quot;not&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;operator must be one of &quot;and&quot;, &quot;or&quot; or &quot;not&quot;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">masks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;only one mask can be supplied for the not operator&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input_masks</span> <span class="o">=</span> <span class="n">masks</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">operator</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask" class="doc doc-heading">
          <code>CHUKAuxilaryDataMask</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a></code></p>


            <details class="quote">
              <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CHUKAuxilaryDataMask</span><span class="p">(</span><span class="n">Mask</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">include_missing</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct a mask associated with a particular dataset</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset_name: the name of the dataset</span>
<span class="sd">            variable_name: the name of the variable in the dataset to use to construct the mask</span>
<span class="sd">            include_missing: whether to also include missing data values (eg NaN) in the mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataset_name</span> <span class="o">=</span> <span class="n">dataset_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_name</span> <span class="o">=</span> <span class="n">variable_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">)[</span><span class="n">variable_name</span><span class="p">]</span>
        <span class="n">meanings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;flag_meanings&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;flag_values&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">meaning</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">meanings</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">[</span><span class="n">meaning</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_missing</span> <span class="o">=</span> <span class="n">include_missing</span>

    <span class="k">def</span> <span class="nf">get_all_mask_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of all the values that could be included in this mask</span>

<span class="sd">        Returns:</span>
<span class="sd">             a list of values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_selected_mask_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of all the values that are included in this mask</span>

<span class="sd">        Returns:</span>
<span class="sd">             a list of values included in this mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">keys</span>

    <span class="k">def</span> <span class="nf">add_mask_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a value to the mask</span>

<span class="sd">        Args:</span>
<span class="sd">            mask_value: the category value to include in the mask</span>
<span class="sd">        Throws:</span>
<span class="sd">            ValueError if the specified value is not a valid value for this mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">matching_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value </span><span class="si">{</span><span class="n">mask_value</span><span class="si">}</span><span class="s2"> does not match any values </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matching_keys</span>

    <span class="k">def</span> <span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain the evaluated mask values</span>
<span class="sd">        Returns:</span>
<span class="sd">            an xarray DataArray object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filter_keys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="p">:</span>
                <span class="n">filter_keys</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
            <span class="n">filter_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">filter_keys</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">filter_values</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_missing</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="p">),</span><span class="kc">True</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span>

    <span class="k">def</span> <span class="nf">__get_matching_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_or_pattern</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value_or_pattern</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">value_or_pattern</span><span class="p">]</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value_or_pattern</span><span class="p">):</span>
                <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matches</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="n">include_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Construct a mask associated with a particular dataset</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dataset_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the dataset</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variable_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the variable in the dataset to use to construct the mask</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>include_missing</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>whether to also include missing data values (eg NaN) in the mask</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">include_missing</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a mask associated with a particular dataset</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_name: the name of the dataset</span>
<span class="sd">        variable_name: the name of the variable in the dataset to use to construct the mask</span>
<span class="sd">        include_missing: whether to also include missing data values (eg NaN) in the mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dataset_name</span> <span class="o">=</span> <span class="n">dataset_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">variable_name</span> <span class="o">=</span> <span class="n">variable_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">)[</span><span class="n">variable_name</span><span class="p">]</span>
    <span class="n">meanings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;flag_meanings&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;flag_values&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">meaning</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">meanings</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">[</span><span class="n">meaning</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">include_missing</span> <span class="o">=</span> <span class="n">include_missing</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.add_mask_value" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_mask_value</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add a value to the mask</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>mask_value</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the category value to include in the mask</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Throws:
    ValueError if the specified value is not a valid value for this mask</p>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_mask_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a value to the mask</span>

<span class="sd">    Args:</span>
<span class="sd">        mask_value: the category value to include in the mask</span>
<span class="sd">    Throws:</span>
<span class="sd">        ValueError if the specified value is not a valid value for this mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matching_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value </span><span class="si">{</span><span class="n">mask_value</span><span class="si">}</span><span class="s2"> does not match any values </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">matching_keys</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_all_mask_values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_all_mask_values</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a list of all the values that could be included in this mask</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of values</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_mask_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of all the values that could be included in this mask</span>

<span class="sd">    Returns:</span>
<span class="sd">         a list of values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.get_selected_mask_values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_selected_mask_values</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a list of all the values that are included in this mask</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of values included in this mask</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_selected_mask_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of all the values that are included in this mask</span>

<span class="sd">    Returns:</span>
<span class="sd">         a list of values included in this mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">keys</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask.to_array" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_array</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Obtain the evaluated mask values
Returns:
    an xarray DataArray object</p>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obtain the evaluated mask values</span>
<span class="sd">    Returns:</span>
<span class="sd">        an xarray DataArray object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">filter_keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_values</span><span class="p">:</span>
            <span class="n">filter_keys</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_matching_keys</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
        <span class="n">filter_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value_lookup</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">filter_keys</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">filter_values</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_missing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">da</span><span class="p">),</span><span class="kc">True</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils" class="doc doc-heading">
          <code>CHUKAuxilaryUtils</code>


</h2>


  <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CHUKAuxilaryUtils</span><span class="p">:</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_mask</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">mask_values</span><span class="p">:[</span><span class="nb">str</span><span class="p">,</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">include_missing</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CHUKAuxilaryDataMask</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a mask</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset_path: path to the netcdf file containing the auxilary data to use</span>
<span class="sd">            variable: the variable in the file to use in the mask</span>
<span class="sd">            mask_values: a string or list of strings</span>
<span class="sd">            include_missing: whether to include missing data values in the mask or not</span>

<span class="sd">        Returns:</span>
<span class="sd">            A mask object containing of True or False values for every cell</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">CHUKAuxilaryDataMask</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">,</span> <span class="n">variable</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask_values</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mask_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">mask_values</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="n">mask_values</span><span class="p">:</span>
            <span class="n">mask</span><span class="o">.</span><span class="n">add_mask_value</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mask</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct the logical AND of a list of masks</span>

<span class="sd">    Args:</span>
<span class="sd">        masks: the masks to combine</span>

<span class="sd">    Returns:</span>
<span class="sd">        Resulting mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">combine_masks_and</span><span class="p">(</span><span class="o">*</span><span class="n">masks</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Mask</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">masks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">and_mask</span><span class="p">(</span><span class="o">*</span><span class="n">masks</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct the logical OR of a list of masks</span>

<span class="sd">    Args:</span>
<span class="sd">        masks: the masks to combine</span>

<span class="sd">    Returns:</span>
<span class="sd">        Resulting mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">combine_masks_or</span><span class="p">(</span><span class="o">*</span><span class="n">masks</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Mask</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">masks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">or_mask</span><span class="p">(</span><span class="o">*</span><span class="n">masks</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct the logical NOT of a mask</span>

<span class="sd">    Args:</span>
<span class="sd">        masks: the masks to combine</span>

<span class="sd">    Returns:</span>
<span class="sd">        Resulting mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">not_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">:</span><span class="n">Mask</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">mask</span><span class="o">.</span><span class="n">not_mask</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryUtils.create_mask" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">create_mask</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">mask_values</span><span class="p">,</span> <span class="n">include_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a mask</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dataset_path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>path to the netcdf file containing the auxilary data to use</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variable</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the variable in the file to use in the mask</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>mask_values</code></td>
          <td>
                <code>[str, list[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a string or list of strings</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>include_missing</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>whether to include missing data values in the mask or not</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask" href="#eocis_chuk_api.chuk_auxilary_utils.CHUKAuxilaryDataMask">CHUKAuxilaryDataMask</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A mask object containing of True or False values for every cell</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">create_mask</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">mask_values</span><span class="p">:[</span><span class="nb">str</span><span class="p">,</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">include_missing</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CHUKAuxilaryDataMask</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a mask</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_path: path to the netcdf file containing the auxilary data to use</span>
<span class="sd">        variable: the variable in the file to use in the mask</span>
<span class="sd">        mask_values: a string or list of strings</span>
<span class="sd">        include_missing: whether to include missing data values in the mask or not</span>

<span class="sd">    Returns:</span>
<span class="sd">        A mask object containing of True or False values for every cell</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">CHUKAuxilaryDataMask</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">,</span> <span class="n">variable</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask_values</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mask_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">mask_values</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">mask_value</span> <span class="ow">in</span> <span class="n">mask_values</span><span class="p">:</span>
        <span class="n">mask</span><span class="o">.</span><span class="n">add_mask_value</span><span class="p">(</span><span class="n">mask_value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mask</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="eocis_chuk_api.chuk_auxilary_utils.Mask" class="doc doc-heading">
          <code>Mask</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code></p>


            <details class="quote">
              <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Mask</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract Base Class for masks, do not instantiate directly</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">or_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="s2">&quot;Mask&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        OR this mask with other masks</span>

<span class="sd">        Args:</span>
<span class="sd">            others: a list of masks to be OR&#39;d with this mask</span>
<span class="sd">        Returns:</span>
<span class="sd">            a combined mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">and_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="s2">&quot;Mask&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        AND this mask with other masks</span>

<span class="sd">        Args:</span>
<span class="sd">            others: a list of masks to be AND&#39;d with this mask</span>
<span class="sd">        Returns:</span>
<span class="sd">            a combined mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">not_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert this mask</span>

<span class="sd">        Returns:</span>
<span class="sd">             a new mask that is the negation of this mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Count the number of True values in this mask</span>

<span class="sd">        Returns:</span>
<span class="sd">            the total number of True values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">fraction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the fraction of values that are True in this mask</span>

<span class="sd">        Returns:</span>
<span class="sd">            the fraction of values that are True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">*=</span> <span class="n">d</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span> <span class="o">/</span> <span class="n">count</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert this mask to an xarray.DataArray and return it</span>

<span class="sd">        Returns:</span>
<span class="sd">             an xarray.DataArray containing the mask values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span> <span class="c1"># implemented in sub-classes</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Abstract Base Class for masks, do not instantiate directly</p>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract Base Class for masks, do not instantiate directly</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.and_mask" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">and_mask</span><span class="p">(</span><span class="o">*</span><span class="n">others</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>AND this mask with other masks</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>others</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of masks to be AND'd with this mask</p>
            </div>
          </td>
          <td>
                <code>()</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    a combined mask</p>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">and_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="s2">&quot;Mask&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    AND this mask with other masks</span>

<span class="sd">    Args:</span>
<span class="sd">        others: a list of masks to be AND&#39;d with this mask</span>
<span class="sd">    Returns:</span>
<span class="sd">        a combined mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.count" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">count</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Count the number of True values in this mask</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the total number of True values</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Count the number of True values in this mask</span>

<span class="sd">    Returns:</span>
<span class="sd">        the total number of True values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.fraction" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fraction</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the fraction of values that are True in this mask</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the fraction of values that are True</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fraction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the fraction of values that are True in this mask</span>

<span class="sd">    Returns:</span>
<span class="sd">        the fraction of values that are True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">*=</span> <span class="n">d</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span> <span class="o">/</span> <span class="n">count</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.not_mask" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">not_mask</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Invert this mask</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a new mask that is the negation of this mask</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">not_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Invert this mask</span>

<span class="sd">    Returns:</span>
<span class="sd">         a new mask that is the negation of this mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.or_mask" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">or_mask</span><span class="p">(</span><span class="o">*</span><span class="n">others</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>OR this mask with other masks</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>others</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="eocis_chuk_api.chuk_auxilary_utils.Mask" href="#eocis_chuk_api.chuk_auxilary_utils.Mask">Mask</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of masks to be OR'd with this mask</p>
            </div>
          </td>
          <td>
                <code>()</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:
    a combined mask</p>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">or_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="s2">&quot;Mask&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mask&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    OR this mask with other masks</span>

<span class="sd">    Args:</span>
<span class="sd">        others: a list of masks to be OR&#39;d with this mask</span>
<span class="sd">    Returns:</span>
<span class="sd">        a combined mask</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CHUKAuxilaryDataCombinedMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">others</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="s2">&quot;or&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="eocis_chuk_api.chuk_auxilary_utils.Mask.to_array" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_array</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Convert this mask to an xarray.DataArray and return it</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="xarray.DataArray">DataArray</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an xarray.DataArray containing the mask values</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>eocis_chuk_api/chuk_auxilary_utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert this mask to an xarray.DataArray and return it</span>

<span class="sd">    Returns:</span>
<span class="sd">         an xarray.DataArray containing the mask values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span> <span class="c1"># implemented in sub-classes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>




  </div>

  </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>